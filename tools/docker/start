#!/bin/sh
#
# start -- start a stopped docker lab
#
# Copyright (C) 2016-2021 Wu Zhangjin <falcon@ruma.tech>
#

TOP_DIR="$(cd "$(dirname "$0")"/../../ && pwd)"
. "$TOP_DIR"/tools/docker/config >/dev/null

# Require to prepare some environment for docker containers in host
if [ -f "$LAB_HOST_RUN" ]; then
  log_print "Run $LAB_HOST_RUN"
  "$LAB_HOST_RUN"
  log_end
fi

log_print "Start $CONTAINER_NAME"
do_op "docker start" CONTAINER_NAME
log_end

if [ "$RELEASE" != '0' ]; then
  log_print "Wait for lab launching"
  sleep 2

  log_print "Update release page"
  "$DOCKER_RELEASE_CMD" all >/dev/null 2>&1
  log_end
fi
